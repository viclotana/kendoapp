{"ast":null,"code":"import * as React from 'react';\n/** @hidden */\n\nexport var useAnimation = function (config, deps) {\n  var offset = React.useRef(0);\n  var mount = React.useRef(false);\n  var animationFrame = React.useRef();\n\n  var animate = function (transition) {\n    var duration = transition.duration;\n    var start;\n    var progress;\n    var skip = offset.current && 1 - offset.current;\n\n    if (transition.onStart) {\n      transition.onStart();\n    }\n\n    var frame = function (timestamp) {\n      if (!start) {\n        start = timestamp;\n      }\n\n      progress = timestamp - start + 1;\n      var rate = progress / duration + skip;\n\n      if (rate <= 1) {\n        if (transition.onUpdate) {\n          transition.onUpdate(rate);\n        }\n\n        animationFrame.current = window.requestAnimationFrame(frame);\n        offset.current = rate;\n      } else {\n        if (transition.onEnd) {\n          transition.onEnd(1);\n        }\n\n        offset.current = 0;\n      }\n    };\n\n    animationFrame.current = window.requestAnimationFrame(frame);\n  };\n\n  React.useEffect(function () {\n    animate(config);\n    return function () {\n      if (animationFrame.current) {\n        window.cancelAnimationFrame(animationFrame.current);\n      }\n    };\n  }, deps);\n  React.useEffect(function () {\n    mount.current = true;\n  }, []);\n};","map":null,"metadata":{},"sourceType":"module"}